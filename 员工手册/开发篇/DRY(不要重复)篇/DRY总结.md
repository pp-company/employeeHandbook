# <center>DRY篇总结</center>

1. 先在DRY篇看一下资料自己尝试写一下再来看这个总结
2. 这些演示为了节省时间基本上都是省略了接口，实际上每个类上面都应该有接口，不要在一个class里面出现另一个class
3. 代码答案之_self
    1. 要保证无论做了什么修改，其他代码不会出问题。为了保证这一点，尤为重要的是保证不要修改接口，私有变量可以随意修改
    2. 改名或者补充参数等情况是在完善这个类(self)，却忘记了还有其他人在使用这个类，一改，其他正在用的人却不知道，导致其他人报错，O原则。改名或补充参数等情况都是影响接口的
    3. 虽然会导致其他人出现问题，可是稍微修改一下也能继续用
    4. 发现写文章和写短文还是会有重复，怎么解决？
    5. 完善:我们可以把重复的放到`_写`这个类里面去，然后`写短文`跟`写文章`继承这个类，放在`_写`这里，因为`署名`跟`_写`的关联性很大。不要补充参数,在原有的基础上改动或者用子类去实现，但是要符合L
4. 代码答案之_S_DEMETER
    1. 一个类只做一件事情，写文章就负责写文章，不要写文章的时候还要削一下铅笔，削铅笔让别的类去做
    2. 一个对象应该对其他对象保持最少的了解，不需要知道铅笔是怎么削的，只需要知道这个铅笔已经削好了能写字就行了
    3. 如果这个铅笔只需要削一次的话那应该一开始就注入一个削好的铅笔就什么问题都没有了
5. 代码答案之_在同一个类中重复
    1. 通过提取方法来解决
    2. 为了更好的O，哪怕是一行的重复也要提取出来
    3. 哪怕是一行的重复，但是重复了几十遍，一百遍，那也是几十次、一百次重复
6. 代码答案之_在同一个类树下重复
    1. 新建一个类(`写东西`)，将写和署名都抽离进去，让写文章和写短篇继承`写东西`
    2. 如果把`写短篇`跟`写文章`的`署名()`抽离成一个`署名`类，那么`署名`需要继承`写东西`，调用`写()`来`署名()`，而`写短篇`跟`写文章`都需要注入`署名`，再调用`_署名.署名()`，所以`写东西`的类依赖`署名`，这就出现了[循环依赖](../循环依赖.md)关系,为什么我们明明强调一个类只能做一件事情，还要将`署名`合并到`写东西`？因为`署名`跟`写东西`的关联性很大，都是在写东西
7. 代码答案之_在不相干的类中重复
    1. 有一个与`写文章`和`写短篇`不相干的`画风景`的类，这个`画风景`的类同样需要削铅笔，削铅笔这个动作与`写文章`和`写短篇`的削铅笔同样重复了
    2. 虽然需要削铅笔，但是不能直接用`画风景`的类去继承`写东西`的类，违反了L原则
    3. 我们可以通过另外的一个接口(`锋利的`)，这个接口可以削，当我们发现`写文章`、`写短篇`、`画风景`类有削这个需求的时候，我们就可以去注入`锋利的`，再去调用`削()`
    4. 我们用一个`画东西`的类继承了`锋利的`的`削()`，再用`画风景`的类去调用，为什么？
    5. 你现在要`画风景`，以后你可能需要`画人物`，如果直接在`画风景`类的代码里调用`削()`，以后`画人物`的类同样需要削，这样代码就会出现重复。但是这个问题你现在解决和到时候解决都行，因为工作量是一样的，这个问题是指又新建了一个画东西的类，如果赶时间就直接在画风景注入`锋利的`，再去调用`削()`，如果不赶时间就新建个画东西注入`锋利的`，再去调用`削()`
    6. `写东西`的类跟`画东西`的类都去注入`锋利的`，再去调用`削()`，这种算不算重复？
    7. 从类的层面去分析，这两个类(`画东西`和`写东西`)没有什么关联，我们改动`画东西`的削不该影响到`写东西`的削，反之亦然，现在我们看着削的方法是一样的，实际上她们是不一样的，可能我们画画的时候需要削得尖一点，而写字的时候需要粗一点，看着重复，实际不重复
    8. 如果`削笔刀`的`削()`升级，应不应该影响到`画东西`和`写东西`的`削()`?比如升级成电动的`削笔刀`，那`画东西`的`削()`和`写东西`的`削()`应不应该享受升级?
    9. 这种结构给了我们极大的代码升级灵活性，如果我们只想升级`写东西`的`削()`不想影响`画东西`的`削()`、或者两个都不想升级、或者两个都想升级怎么办？
    10. 
    \\|写东西升级|写东西不升级|
    -|-|-
    画东西升级|(假设全部都要升级)升级`削笔刀`的`削()`|升级`画东西`的`削()`
    画东西不升级|升级`写东西`的`削()`|(假设有其他`削()`相关的东西要升级)新建一个类叫`电动削笔刀`，继承了`削笔刀`，重写了`削()`，需要升级的就注入`电动削笔刀`，不需要升级的就注入`削笔刀`
        
<center> Copyright © 2021 天下数学引擎科技（深圳）有限公司 All Rights Reserved</center>
